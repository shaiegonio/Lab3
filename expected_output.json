from flask import Flask, jsonify, abort

app = Flask(__name__)

# Sample data
data = {
    1: {
        "userID": 1,
        "posts": [
            {
                "post_title": "sunt aut facere repellat provident occaecati excepturi optio reprehenderit",
                "post_body": "quia et suscipit\nsuscipit recusandae consequuntur expedita et cum\nreprehenderit molestiae ut ut quas totam\nnostrum rerum est autem sunt rem eveniet architecto",
                "comments": [
                    {
                        "comment_id": 1,
                        "name": "id labore ex et quam laborum",
                        "email": "Eliseo@gardner.biz",
                        "body": "laudantium enim quasi est quidem magnam voluptate ipsam eos\ntempora quo necessitatibus\ndolor quam autem quasi\nreiciendis et nam sapiente accusantium"
                    },
                    # Additional comments can be added here
                ]
            },
            # Additional posts can be added here
        ]
    },
    # Additional users can be added here
}

@app.route('/detailed_post/<int:user_id>', methods=['GET'])
def get_detailed_post(user_id):
    user_posts = data.get(user_id)
    if not user_posts:
        abort(404, description="User not found")
    
    response = {
        "userID": user_posts["userID"],
        "posts": []
    }
    
    for post in user_posts["posts"]:
        post_details = {
            "post_title": post["post_title"],
            "post_body": post["post_body"],
            "comments": []
        }
        
        for comment in post["comments"]:
            comment_details = {
                "comment_id": comment["comment_id"],
                "name": comment["name"],
                "email": comment["email"],
                "body": comment["body"]
            }
            post_details["comments"].append(comment_details)
        
        response["posts"].append(post_details)

    return jsonify(response)

if __name__ == '__main__':
    app.run(debug=True)
